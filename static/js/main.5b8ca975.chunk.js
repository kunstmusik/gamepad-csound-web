(this["webpackJsonpgamepad-csound-web"]=this["webpackJsonpgamepad-csound-web"]||[]).push([[0],{13:function(e,n,t){},14:function(e,n,t){},25:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(7),i=t.n(o),s=(t(13),t(3)),c=(t(14),t(2)),l=t.n(c),u=new Array(14).fill(!1);var d=function(){var e=Object(a.useState)(null),n=Object(s.a)(e,2),t=n[0],o=n[1],i=Object(a.useState)(!1),c=Object(s.a)(i,2),d=c[0],p=c[1],m=function e(){var n=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];if(n.length>0){var a=n[0];if(a){for(var r=0;r<a.buttons.length;r++)a.buttons[r].pressed!==u[r]&&(u[r]=a.buttons[r].pressed,u[r]?t.evaluateCode("schedule(1.".concat(r,", 0, -2, cpsmidinn(48 + 2 * ").concat(r,"), ampdbfs(-12))")):t.evaluateCode("schedule(-1.".concat(r,", 0, 2, cpsmidinn(48 + 2 * ").concat(r,"), ampdbfs(-12))")));for(var o=0;o<a.axes.length;o++)t.setControlChannel("axis".concat(o),a.axes[o])}}requestAnimationFrame(e)};return Object(a.useEffect)((function(){null==t&&l.a.initialize().then((function(){var e=new l.a;o(e)}))}),[t]),r.a.createElement("div",{className:"App"},t?r.a.createElement("header",{className:"App-header"},r.a.createElement("div",null,r.a.createElement("h1",null,"Xbox One Controller + Csound"),r.a.createElement("div",{style:{maxWidth:800,textAlign:"left"}},r.a.createElement("p",null,"This is a proof-of-concept web application that uses input from the GamePad API together with WebAudio Csound to create an interactive instrument.  The site is currently hardcoded for use with an Xbox One controller."),r.a.createElement("p",null,"To use: button presses turn on notes and releases turn off notes. Analog input is used to control filter cutoff, pitch bend, and vibrato frequency and amplitude."))),r.a.createElement("div",null,d?r.a.createElement("div",null,"Running..."):r.a.createElement("button",{onClick:function(){t.setOption("-+msg_color=false"),t.compileOrc('sr = 48000\nksmps = 64\nnchnls=2\n0dbfs=1\n\n\nga1 = 0\nga2 = 0\n\ninstr  1\n  kpchbend = port(chnget:k("axis1") * -1, 0.05)\n  kvibamp = port(chnget:k("axis3") * -.5 + 0.5, 0.05)\n  kvibfreq = port(chnget:k("axis2") * 4 , 0.05)\n\n  kfreq = p4 * semitone(kpchbend) \n  kfreq *= cent(oscili:k(kvibamp, kvibfreq) * 20)\n\n  asig = vco2(1, kfreq) \n  asig += vco2(0.25, kfreq * 1.5) \n\n  kcut = port(chnget:k("axis0"), 0.05) * 2 + 11.5 \n  asig = zdf_ladder(asig, cpsoct(kcut), 0.5) \n\n  asig *= expsegr(0.001, .05, 0.1, 2, 0.001)\n\n  ga1 += asig\n  ga2 += asig\nendin\n\ninstr Mixer\n  arvb1, arvb2 reverbsc ga1, ga2, 0.75, 8000\n\n  a1 = ntrpol(ga1, arvb1, 0.2)\n  a2 = ntrpol(ga2, arvb2, 0.2)\n\n  out(a1, a2)\n  ga1 = 0\n  ga2 = 0\nendin\n\nschedule("Mixer", 0, -1)\n'),t.start(),t.audioContext.resume(),p(!0),requestAnimationFrame(m)}},"Start App")),r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/kunstmusik/gamepad-csound-web"},"View Source"))):r.a.createElement("header",{className:"App-header"},"Loading..."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,n,t){e.exports=t(25)}},[[8,1,2]]]);
//# sourceMappingURL=main.5b8ca975.chunk.js.map